{
    "version": "https://jsonfeed.org/version/1",
    "title": "茗辰原 • All posts by \"网站建站\" tag",
    "description": "茶香四溢,编程世界.",
    "home_page_url": "https://mingcy.cn",
    "items": [
        {
            "id": "https://mingcy.cn/2024/05/25/Vercel-Typecho/",
            "url": "https://mingcy.cn/2024/05/25/Vercel-Typecho/",
            "title": "Vercel部署Typecho 博客",
            "date_published": "2024-05-24T16:00:00.000Z",
            "content_html": "<p>&lt;aside&gt;<br>\n😀 这里写文章的概述：<br>\n本文介绍了如何使用 Vercel 部署 Typecho 博客。内容包括准备工作和具体操作步骤，如创建 GitHub 仓库、配置文件、上传主题等。通过 Vercel 部署项目并添加域名，实现博客部署和初始化。操作简单明了，适合初学者。文章重点强调了 Vercel 支持 PHP 部署，提供了详细的操作指南，包括代码示例和截图，让读者能够轻松完成部署过程。</p>\n<p>&lt;/aside&gt;</p>\n<h2 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h2>\n<p>相信很多人不知道 Vercel 可以部署 PHP，可以在 <a href=\"https://vercel.com/docs/runtimes?query=php#advanced-usage/community-runtimes\"><strong>Vercel 文档</strong></a> 中看到确实支持</p>\n<h2 id=\"准备工作\"><a class=\"anchor\" href=\"#准备工作\">#</a> 准备工作</h2>\n<ol>\n<li><a href=\"https://github.com\">Github</a> 账号</li>\n<li><a href=\"https://vercel.com/\">Vercel</a> 账号</li>\n<li><a href=\"https://typecho.org/\">Typecho</a> 程序</li>\n<li>数据库</li>\n<li>自己的域名（可选，国内注册可以首年 1 元甚至免费）部署完成之后默认会给你的项目分配一个 vercel.app 的三级域名，但是在 2021 年 vercel.app 域名被墙，大陆地区无法访问，因此强烈建议自己准备域名</li>\n</ol>\n<h2 id=\"过程\"><a class=\"anchor\" href=\"#过程\">#</a> 过程</h2>\n<ol>\n<li>创建 Github 仓库</li>\n<li>本地解压 Typecho 程序</li>\n<li>在根目录下新建  <code>vercel.json</code>  并填入以下代码</li>\n</ol>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"functions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"api/index.php\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token property\">\"runtime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vercel-php@0.6.0\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token property\">\"routes\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span> <span class=\"token property\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/(.*)\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"dest\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/api/index.php\"</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ol>\n<li>在根目录下新建  <code>config.inc.php</code>  并填入以下代码</li>\n</ol>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">/**</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * Typecho Blog Platform</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> *</pre></td></tr><tr><td data-num=\"5\"></td><td><pre> * @copyright  Copyright (c) 2008 Typecho team (http://www.typecho.org)</pre></td></tr><tr><td data-num=\"6\"></td><td><pre> * @license    GNU General Public License 2.0</pre></td></tr><tr><td data-num=\"7\"></td><td><pre> * @version    $Id$</pre></td></tr><tr><td data-num=\"8\"></td><td><pre> */</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">/** 开启 https */</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'__TYPECHO_SECURE__'</span><span class=\"token punctuation\">,</span><span class=\"token constant boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">/** 定义根目录 */</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'__TYPECHO_ROOT_DIR__'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">dirname</span><span class=\"token punctuation\">(</span><span class=\"token constant\">__FILE__</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">/** 定义插件目录 (相对路径) */</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'__TYPECHO_PLUGIN_DIR__'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'/usr/plugins'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">/** 定义模板目录 (相对路径) */</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'__TYPECHO_THEME_DIR__'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'/usr/themes'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">/** 后台路径 (相对路径) */</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'__TYPECHO_ADMIN_DIR__'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'/admin/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\">/** 设置包含路径 */</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>@<span class=\"token function\">set_include_path</span><span class=\"token punctuation\">(</span><span class=\"token function\">get_include_path</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token constant\">PATH_SEPARATOR</span> <span class=\"token operator\">.</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token constant\">__TYPECHO_ROOT_DIR__</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/var'</span> <span class=\"token operator\">.</span> <span class=\"token constant\">PATH_SEPARATOR</span> <span class=\"token operator\">.</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token constant\">__TYPECHO_ROOT_DIR__</span> <span class=\"token operator\">.</span> <span class=\"token constant\">__TYPECHO_PLUGIN_DIR__</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\">/** 载入 API 支持 */</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">require_once</span> <span class=\"token string single-quoted-string\">'Typecho/Common.php'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token comment\">/** 程序初始化 */</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token class-name static-context\">Typecho_Common</span><span class=\"token operator\">::</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token comment\">/** 定义数据库参数 */</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token variable\">$db</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Typecho_Db</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Pdo_Mysql'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'typecho_'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token variable\">$db</span><span class=\"token operator\">-></span><span class=\"token function\">addServer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">array</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token string single-quoted-string\">'host'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'数据库地址'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>  <span class=\"token string single-quoted-string\">'user'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'数据库用户名'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token string single-quoted-string\">'password'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'数据库密码'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token string single-quoted-string\">'charset'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'utf8mb4'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  <span class=\"token string single-quoted-string\">'port'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'3306'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token string single-quoted-string\">'database'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'数据库名称'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  <span class=\"token string single-quoted-string\">'engine'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'MyISAM'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name static-context\">Typecho_Db</span><span class=\"token operator\">::</span><span class=\"token class-name\">READ</span> <span class=\"token operator\">|</span> <span class=\"token class-name\">Typecho_Db</span><span class=\"token operator\">::</span><span class=\"token constant\">WRITE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token class-name static-context\">Typecho_Db</span><span class=\"token operator\">::</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$db</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ol>\n<li>在根目录下新建  <code>/api/index.php</code>  并填入以下代码</li>\n</ol>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$file</span><span class=\"token operator\">=</span> <span class=\"token constant\">__DIR__</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/..'</span><span class=\"token operator\">.</span><span class=\"token variable\">$_SERVER</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"PHP_SELF\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">file_exists</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   <span class=\"token keyword\">return</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">else</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">require_once</span> <span class=\"token constant\">__DIR__</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/../index.php'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">#echo $_SERVER[\"PHP_SELF\"];</span></pre></td></tr></table></figure><ol>\n<li>\n<p>下载一个自己心仪的主题解压放到  <code>/usr/themes/</code>  目录下</p>\n</li>\n<li>\n<p>将所有文件上传到第一步创建好的 GitHub 仓库里</p>\n</li>\n<li>\n<p>打开 <a href=\"https://vercel.com/\"><strong>Vercel</strong></a> 然后通过 GitHub 快捷登录</p>\n<p><img loading=\"lazy\" data-src=\"https://cdn.xalaok.top/images/blog/2023/05/06/4.jpg\" alt=\"https://cdn.xalaok.top/images/blog/2023/05/06/4.jpg\"></p>\n</li>\n<li>\n<p>登陆后会自动跳转 Dashboard，点击 Add new - Project</p>\n<p><img loading=\"lazy\" data-src=\"https://cdn.xalaok.top/images/blog/2023/05/06/5.jpg\" alt=\"https://cdn.xalaok.top/images/blog/2023/05/06/5.jpg\"></p>\n</li>\n<li>\n<p>Import Git Repository 选择 Continue With GitHub 此时会跳转到 GitHub 批准 Vercel 访问，建议选择允许访问全部仓库，当然你也可以设置仅可访问部分仓库。</p>\n</li>\n<li>\n<p>选择你的仓库</p>\n</li>\n<li>\n<p>即将开始部署，在这个界面你可以设置项目名称（可以随意设置），其他项全部保持默认即可，最后点击 Deploy 部署</p>\n</li>\n<li>\n<p>部署成功后会显示 Congratulation 页面</p>\n</li>\n<li>\n<p>如果你有域名，直接从此界面右边 “Add Domain” 进入添加域名，Vercel 会自动生成 SSL 证书（开启 https）。没有的话直接右上角 “Go to Dashboard” 就可以看到 Vercel 为你准备的域名</p>\n</li>\n<li>\n<p>打开  <code>https://你的网址/install.php</code>  初始化</p>\n</li>\n</ol>\n<p>SO easy!</p>\n",
            "tags": [
                "建站",
                "网站建站",
                "计算机"
            ]
        }
    ]
}