{
    "version": "https://jsonfeed.org/version/1",
    "title": "茗辰原 • All posts by \"壁纸\" tag",
    "description": "茶香四溢,编程世界.",
    "home_page_url": "https://mingcy.cn",
    "items": [
        {
            "id": "https://mingcy.cn/2024/10/26/suijip/",
            "url": "https://mingcy.cn/2024/10/26/suijip/",
            "title": "使用works制作随机图!",
            "date_published": "2024-10-26T04:00:00.000Z",
            "content_html": "<p>随机图的轮子其实网上有不少了，但基本都需要一台服务器，或者用别人提供的服务。</p>\n<p>但其实托管图片获取直链还是比较简单的，所以想着用 Cloudflare Workers 在直链中随机选一个，来搭建一个私人的随机图片服务。</p>\n<h2 id=\"你需要\"><a class=\"anchor\" href=\"#你需要\">#</a> 你需要</h2>\n<ul>\n<li>一个 Cloudflare 账号</li>\n<li>一堆图片直链</li>\n</ul>\n<h2 id=\"图片直链\"><a class=\"anchor\" href=\"#图片直链\">#</a> 图片直链</h2>\n<p>不少图床都提供直链服务，比如 <a href=\"https://sm.ms/\">sm.ms</a>（免费版单文件上限 5MB，速度很快），或者 <a href=\"https://img.vim-cn.com/\">img.vim-cn.com</a>（单文件上限 50MB，国内速度一般）。</p>\n<p>或者，如果你对这些公共的服务不太放心的话，一个 GitHub Repo 也是不错的选择。</p>\n<p>总之，只需要一个直链，方法很多，自己灵活选择。</p>\n<h2 id=\"部署-workers\"><a class=\"anchor\" href=\"#部署-workers\">#</a> 部署 Workers</h2>\n<p>方法不多说，网上一大堆，下面直接贴代码。</p>\n<pre><code>addEventListener('fetch', event =&gt; &#123;\n    event.respondWith(handleRequest(event.request))\n&#125;)\n\nasync function handleRequest(request) &#123;\n\n\tvar background_urls = [\n\t'https://w.wallhaven.cc/full/ey/wallhaven-eymzjk.jpg',\n\t'https://w.wallhaven.cc/full/j8/wallhaven-j8rk95.png'\n\t]\n\tvar index = Math.floor((Math.random()*background_urls.length));\n\tres = await fetch(background_urls[index])\n    return new Response(res.body, &#123;\n        headers: &#123; 'content-type': 'image/jpeg' &#125;,\n    &#125;)\n&#125;\n\nJAVASCRIPT\n</code></pre>\n<p><code>background_urls</code>  是一个保存直链的数组，将所有你想随机的图片加入进去即可。</p>\n<p>P.S. 没有学过 Javascript，临时拼凑而成，希望有大佬可以优化地更好。</p>\n<h1 id=\"我的随机图\"><a class=\"anchor\" href=\"#我的随机图\">#</a> 我的随机图:</h1>\n<p><img loading=\"lazy\" data-src=\"https://webp.liyy.us.kg/\" alt=\"网址https://webp.liyy.us.kg/\"></p>\n",
            "tags": [
                "Cloudflare",
                "works",
                "壁纸",
                "随机图"
            ]
        }
    ]
}