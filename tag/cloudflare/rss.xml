<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>茗辰原 • Posts by &#34;cloudflare&#34; tag</title>
        <link>https://mingcy.cn</link>
        <description>茶香四溢,编程世界.</description>
        <language>zh-CN</language>
        <pubDate>Sat, 26 Oct 2024 12:00:00 +0800</pubDate>
        <lastBuildDate>Sat, 26 Oct 2024 12:00:00 +0800</lastBuildDate>
        <category>电脑软件</category>
        <category>123网盘</category>
        <category>工具</category>
        <category>C++</category>
        <category>编程语言</category>
        <category>ChatGPT</category>
        <category>Openai</category>
        <category>建站</category>
        <category>网站建站</category>
        <category>计算机</category>
        <category>安卓应用</category>
        <category>广告</category>
        <category>塔罗牌</category>
        <category>网页精选</category>
        <category>Ai</category>
        <category>文字语音</category>
        <category>安卓软件</category>
        <category>音乐</category>
        <category>实用推荐</category>
        <category>Cloudflare</category>
        <category>部署</category>
        <category>分享</category>
        <category>班级</category>
        <category>实验</category>
        <category>心理</category>
        <category>锻炼</category>
        <category>生活</category>
        <category>精选网站</category>
        <category>app,</category>
        <category>系统优化</category>
        <category>hexo</category>
        <category>技术分享</category>
        <category>实用</category>
        <category>app</category>
        <category>科幻科普</category>
        <category>推荐</category>
        <category>记录</category>
        <category>亲情</category>
        <category>妈妈</category>
        <category>百度网盘</category>
        <category>激活</category>
        <category>教程</category>
        <category>QQ空间</category>
        <category>开源</category>
        <category>works</category>
        <category>壁纸</category>
        <category>随机图</category>
        <category>影视</category>
        <category>指令</category>
        <category>吾爱破解</category>
        <category>调查</category>
        <category>人物</category>
        <category>积累</category>
        <item>
            <guid isPermalink="true">https://mingcy.cn/2024/10/26/suijip/</guid>
            <title>使用works制作随机图!</title>
            <link>https://mingcy.cn/2024/10/26/suijip/</link>
            <category>Cloudflare</category>
            <category>works</category>
            <category>壁纸</category>
            <category>随机图</category>
            <pubDate>Sat, 26 Oct 2024 12:00:00 +0800</pubDate>
            <description><![CDATA[ &lt;p&gt;随机图的轮子其实网上有不少了，但基本都需要一台服务器，或者用别人提供的服务。&lt;/p&gt;
&lt;p&gt;但其实托管图片获取直链还是比较简单的，所以想着用 Cloudflare Workers 在直链中随机选一个，来搭建一个私人的随机图片服务。&lt;/p&gt;
&lt;h2 id=&#34;你需要&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#你需要&#34;&gt;#&lt;/a&gt; 你需要&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;一个 Cloudflare 账号&lt;/li&gt;
&lt;li&gt;一堆图片直链&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;图片直链&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#图片直链&#34;&gt;#&lt;/a&gt; 图片直链&lt;/h2&gt;
&lt;p&gt;不少图床都提供直链服务，比如 &lt;a href=&#34;https://sm.ms/&#34;&gt;sm.ms&lt;/a&gt;（免费版单文件上限 5MB，速度很快），或者 &lt;a href=&#34;https://img.vim-cn.com/&#34;&gt;img.vim-cn.com&lt;/a&gt;（单文件上限 50MB，国内速度一般）。&lt;/p&gt;
&lt;p&gt;或者，如果你对这些公共的服务不太放心的话，一个 GitHub Repo 也是不错的选择。&lt;/p&gt;
&lt;p&gt;总之，只需要一个直链，方法很多，自己灵活选择。&lt;/p&gt;
&lt;h2 id=&#34;部署-workers&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#部署-workers&#34;&gt;#&lt;/a&gt; 部署 Workers&lt;/h2&gt;
&lt;p&gt;方法不多说，网上一大堆，下面直接贴代码。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;addEventListener(&#39;fetch&#39;, event =&amp;gt; &amp;#123;
    event.respondWith(handleRequest(event.request))
&amp;#125;)

async function handleRequest(request) &amp;#123;

	var background_urls = [
	&#39;https://w.wallhaven.cc/full/ey/wallhaven-eymzjk.jpg&#39;,
	&#39;https://w.wallhaven.cc/full/j8/wallhaven-j8rk95.png&#39;
	]
	var index = Math.floor((Math.random()*background_urls.length));
	res = await fetch(background_urls[index])
    return new Response(res.body, &amp;#123;
        headers: &amp;#123; &#39;content-type&#39;: &#39;image/jpeg&#39; &amp;#125;,
    &amp;#125;)
&amp;#125;

JAVASCRIPT
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;background_urls&lt;/code&gt;  是一个保存直链的数组，将所有你想随机的图片加入进去即可。&lt;/p&gt;
&lt;p&gt;P.S. 没有学过 Javascript，临时拼凑而成，希望有大佬可以优化地更好。&lt;/p&gt;
&lt;h1 id=&#34;我的随机图&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#我的随机图&#34;&gt;#&lt;/a&gt; 我的随机图:&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://webp.liyy.us.kg/&#34; alt=&#34;网址https://webp.liyy.us.kg/&#34;&gt;&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://mingcy.cn/2024/08/31/cf-words/</guid>
            <title>Cloudflare上有趣的项目</title>
            <link>https://mingcy.cn/2024/08/31/cf-words/</link>
            <category>Cloudflare</category>
            <category>部署</category>
            <category>分享</category>
            <pubDate>Sat, 31 Aug 2024 00:00:00 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;开端&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#开端&#34;&gt;#&lt;/a&gt; 开端&lt;/h1&gt;
&lt;p&gt;我在逛我的朋友圈的时候，发现清羽飞扬的小站发布了他总结的 Cloudflare 项目，一键部署，看起来真的很不错，就自己动手操作了一下.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;%E6%B8%85%E7%BE%BD%E9%A3%9E%E6%89%AC,owo,https://blog.liushen.fun&#34; title target&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;主要有的项目有：在线笔记  在线论坛    文件中转站&lt;/p&gt;
&lt;h1 id=&#34;部署&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#部署&#34;&gt;#&lt;/a&gt; 部署&lt;/h1&gt;
&lt;h2 id=&#34;在线笔记&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#在线笔记&#34;&gt;#&lt;/a&gt; 在线笔记&lt;/h2&gt;
&lt;p&gt;这是一个基于 Cloudflare Worker、KV 和 Github Actions 实现，可以一键私有化部署的无成本在线云笔记项目，你可以记录文字，与朋友们分享，或者跨设备同步。下面是项目地址：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;serverless-cloud-notepad,GitHub,https://github.com/s0urcelab/serverless-cloud-notepad&#34; title target&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;可以持久化保存笔记，并且支持设置密码，可以用于临时文字传输。&lt;/p&gt;
&lt;h3 id=&#34;部署项目&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#部署项目&#34;&gt;#&lt;/a&gt; 部署项目&lt;/h3&gt;
&lt;p&gt;首先，fork 仓库，然后再在变量中设置环境变量，如下三个变量，后面两个随便填写字符串即可。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-YAML&#34;&gt;CLOUDFLARE_API_TOKEN # 之前申请到的 Cloudflare API令牌
SCN_SALT # 随便填（安全用途）
SCN_SECRET # 随便填（安全用途）
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后在 github action 中，运行 Deploy cloud-notepad，等待运行成功，则项目成功部署，点击进入 cloudflare workers 界面，查看或另绑定域名，即可正常访问。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;效果如下:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;/2024/08/31/cf-words/result.png&#34; class title=&#34;效果&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;链接如下:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;%E5%9C%A8%E7%BA%BF%E7%AC%94%E8%AE%B0,MingCY,https://n.liyy.us.kg/&#34; title target&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;在线论坛&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#在线论坛&#34;&gt;#&lt;/a&gt; 在线论坛&lt;/h2&gt;
&lt;p&gt;项目地址如下:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;locnode,Github,https://github.com/minlearn/&#34; title target&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这是想打造一个校园论坛了，只不过，这个配置还需探索，自定义的很少，不知道如何添加分类，和背景主题等&lt;/p&gt;
&lt;h3 id=&#34;部署项目-2&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#部署项目-2&#34;&gt;#&lt;/a&gt; 部署项目&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;fork 仓库到你的账户下&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;添加环境变量：&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;CLOUDFLARE_ACCOUNT_ID&lt;/li&gt;
&lt;li&gt;CLOUDFLARE_API_TOKEN&lt;/li&gt;
&lt;li&gt;CLOUDFLARE_PROJECT_NAME&lt;br&gt;
 前两个不用说，第三个为项目名称，比如我填写的是：locnode，不要带符号。&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;在你 fork 到的仓库里面运行 action 进行部署。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;简单使用&lt;br&gt;
项目支持多用户，会自动创建 D1 数据库存储信息，你可以通过修改数据库来指定管理员等身份：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;/2024/08/31/cf-words/1.webp&#34; class title=&#34;数据库&#34;&gt;&lt;/p&gt;
&lt;p&gt;展示:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;/2024/08/31/cf-words/2.webp&#34; class title=&#34;网址页面&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;文件中转站&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#文件中转站&#34;&gt;#&lt;/a&gt; 文件中转站&lt;/h2&gt;
&lt;h2 id=&#34;项目部署&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#项目部署&#34;&gt;#&lt;/a&gt; 项目部署&lt;/h2&gt;
&lt;p&gt;项目地址:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;pastebin-ui,Github,https://github.com/rumian0/pastebin-ui&#34; title target&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;其实部署起来非常简单，因为项目是分为前后端的，所以我们需要分别配置前后端：&lt;/p&gt;
&lt;p&gt;添加环境变量&lt;strong&gt; CF_API_TOKEN&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;修改&lt;strong&gt; wrangler.toml&lt;/strong&gt; 文件中的内容，主要修改两个 KV 的 ID 和账户 ID，请提前在 cloudflare 中创建好对应 KV：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-TOML&#34;&gt;name= &amp;quot;pastebin-worker&amp;quot;
compatibility_date = &amp;quot;2024-08-31&amp;quot;
account_id= &amp;quot;36d7b2c5fa77292ef996f68e964478bd&amp;quot;
main = &amp;quot;src/index.ts&amp;quot;
workers_dev = false

vars = &amp;#123; ENVIRONMENT = &amp;quot;production&amp;quot; &amp;#125;
route = &amp;#123; pattern = &amp;quot;paste.liyy.us.kg&amp;quot;, custom_domain = true &amp;#125;

kv_namespaces = [
  &amp;#123; binding = &amp;quot;PB&amp;quot;, id = &amp;quot;86bca3e920024adb9e70cd7c5da6ceed&amp;quot; &amp;#125;,
  &amp;#123; binding = &amp;quot;PBIMGS&amp;quot;, id =&amp;quot;e3f5af1a0c584fcd841081d41a0c014d&amp;quot; &amp;#125;
]

[site]
bucket = &amp;quot;./static/dist&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;修改 **/static/.env** 文件，修改为你准备部署的地址，比如本站：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-YAML&#34;&gt;VITE_API_URL= https://paste.liyy.us.kg
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;点击&lt;strong&gt; github action&lt;/strong&gt; 并进行部署，最终，项目即可成功部署。&lt;/p&gt;
&lt;h3 id=&#34;报错&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#报错&#34;&gt;#&lt;/a&gt; 报错&lt;/h3&gt;
&lt;p&gt;目前部署失败，不知道哪一步出错，看下有没有大佬可以指点一下&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;/2024/08/31/cf-words/3.webp&#34; class title=&#34;英文&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;/2024/08/31/cf-words/4.webp&#34; class title=&#34;中文&#34;&gt;&lt;/p&gt;
 ]]></description>
        </item>
    </channel>
</rss>
