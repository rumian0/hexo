{
    "version": "https://jsonfeed.org/version/1",
    "title": "茗辰原 • All posts by \"cloudflare\" tag",
    "description": "茶香四溢,编程世界.",
    "home_page_url": "https://mingcy.cn",
    "items": [
        {
            "id": "https://mingcy.cn/2024/10/26/suijip/",
            "url": "https://mingcy.cn/2024/10/26/suijip/",
            "title": "使用works制作随机图!",
            "date_published": "2024-10-26T04:00:00.000Z",
            "content_html": "<p>随机图的轮子其实网上有不少了，但基本都需要一台服务器，或者用别人提供的服务。</p>\n<p>但其实托管图片获取直链还是比较简单的，所以想着用 Cloudflare Workers 在直链中随机选一个，来搭建一个私人的随机图片服务。</p>\n<h2 id=\"你需要\"><a class=\"anchor\" href=\"#你需要\">#</a> 你需要</h2>\n<ul>\n<li>一个 Cloudflare 账号</li>\n<li>一堆图片直链</li>\n</ul>\n<h2 id=\"图片直链\"><a class=\"anchor\" href=\"#图片直链\">#</a> 图片直链</h2>\n<p>不少图床都提供直链服务，比如 <a href=\"https://sm.ms/\">sm.ms</a>（免费版单文件上限 5MB，速度很快），或者 <a href=\"https://img.vim-cn.com/\">img.vim-cn.com</a>（单文件上限 50MB，国内速度一般）。</p>\n<p>或者，如果你对这些公共的服务不太放心的话，一个 GitHub Repo 也是不错的选择。</p>\n<p>总之，只需要一个直链，方法很多，自己灵活选择。</p>\n<h2 id=\"部署-workers\"><a class=\"anchor\" href=\"#部署-workers\">#</a> 部署 Workers</h2>\n<p>方法不多说，网上一大堆，下面直接贴代码。</p>\n<pre><code>addEventListener('fetch', event =&gt; &#123;\n    event.respondWith(handleRequest(event.request))\n&#125;)\n\nasync function handleRequest(request) &#123;\n\n\tvar background_urls = [\n\t'https://w.wallhaven.cc/full/ey/wallhaven-eymzjk.jpg',\n\t'https://w.wallhaven.cc/full/j8/wallhaven-j8rk95.png'\n\t]\n\tvar index = Math.floor((Math.random()*background_urls.length));\n\tres = await fetch(background_urls[index])\n    return new Response(res.body, &#123;\n        headers: &#123; 'content-type': 'image/jpeg' &#125;,\n    &#125;)\n&#125;\n\nJAVASCRIPT\n</code></pre>\n<p><code>background_urls</code>  是一个保存直链的数组，将所有你想随机的图片加入进去即可。</p>\n<p>P.S. 没有学过 Javascript，临时拼凑而成，希望有大佬可以优化地更好。</p>\n<h1 id=\"我的随机图\"><a class=\"anchor\" href=\"#我的随机图\">#</a> 我的随机图:</h1>\n<p><img loading=\"lazy\" data-src=\"https://webp.liyy.us.kg/\" alt=\"网址https://webp.liyy.us.kg/\"></p>\n",
            "tags": [
                "Cloudflare",
                "works",
                "壁纸",
                "随机图"
            ]
        },
        {
            "id": "https://mingcy.cn/2024/08/31/cf-words/",
            "url": "https://mingcy.cn/2024/08/31/cf-words/",
            "title": "Cloudflare上有趣的项目",
            "date_published": "2024-08-30T16:00:00.000Z",
            "content_html": "<h1 id=\"开端\"><a class=\"anchor\" href=\"#开端\">#</a> 开端</h1>\n<p>我在逛我的朋友圈的时候，发现清羽飞扬的小站发布了他总结的 Cloudflare 项目，一键部署，看起来真的很不错，就自己动手操作了一下.</p>\n<p><a href=\"%E6%B8%85%E7%BE%BD%E9%A3%9E%E6%89%AC,owo,https://blog.liushen.fun\" title target></a></p>\n<p>主要有的项目有：在线笔记  在线论坛    文件中转站</p>\n<h1 id=\"部署\"><a class=\"anchor\" href=\"#部署\">#</a> 部署</h1>\n<h2 id=\"在线笔记\"><a class=\"anchor\" href=\"#在线笔记\">#</a> 在线笔记</h2>\n<p>这是一个基于 Cloudflare Worker、KV 和 Github Actions 实现，可以一键私有化部署的无成本在线云笔记项目，你可以记录文字，与朋友们分享，或者跨设备同步。下面是项目地址：</p>\n<p><a href=\"serverless-cloud-notepad,GitHub,https://github.com/s0urcelab/serverless-cloud-notepad\" title target></a></p>\n<p>可以持久化保存笔记，并且支持设置密码，可以用于临时文字传输。</p>\n<h3 id=\"部署项目\"><a class=\"anchor\" href=\"#部署项目\">#</a> 部署项目</h3>\n<p>首先，fork 仓库，然后再在变量中设置环境变量，如下三个变量，后面两个随便填写字符串即可。</p>\n<pre><code class=\"language-YAML\">CLOUDFLARE_API_TOKEN # 之前申请到的 Cloudflare API令牌\nSCN_SALT # 随便填（安全用途）\nSCN_SECRET # 随便填（安全用途）\n</code></pre>\n<p>然后在 github action 中，运行 Deploy cloud-notepad，等待运行成功，则项目成功部署，点击进入 cloudflare workers 界面，查看或另绑定域名，即可正常访问。</p>\n<p><strong>效果如下:</strong></p>\n<p><img loading=\"lazy\" data-src=\"/2024/08/31/cf-words/result.png\" class title=\"效果\"></p>\n<p><strong>链接如下:</strong></p>\n<p><a href=\"%E5%9C%A8%E7%BA%BF%E7%AC%94%E8%AE%B0,MingCY,https://n.liyy.us.kg/\" title target></a></p>\n<h2 id=\"在线论坛\"><a class=\"anchor\" href=\"#在线论坛\">#</a> 在线论坛</h2>\n<p>项目地址如下:</p>\n<p><a href=\"locnode,Github,https://github.com/minlearn/\" title target></a></p>\n<p>这是想打造一个校园论坛了，只不过，这个配置还需探索，自定义的很少，不知道如何添加分类，和背景主题等</p>\n<h3 id=\"部署项目-2\"><a class=\"anchor\" href=\"#部署项目-2\">#</a> 部署项目</h3>\n<ol>\n<li>\n<p>fork 仓库到你的账户下</p>\n</li>\n<li>\n<p>添加环境变量：</p>\n</li>\n</ol>\n<ul>\n<li>CLOUDFLARE_ACCOUNT_ID</li>\n<li>CLOUDFLARE_API_TOKEN</li>\n<li>CLOUDFLARE_PROJECT_NAME<br>\n 前两个不用说，第三个为项目名称，比如我填写的是：locnode，不要带符号。</li>\n</ul>\n<ol start=\"3\">\n<li>在你 fork 到的仓库里面运行 action 进行部署。</li>\n</ol>\n<p>简单使用<br>\n项目支持多用户，会自动创建 D1 数据库存储信息，你可以通过修改数据库来指定管理员等身份：</p>\n<p><img loading=\"lazy\" data-src=\"/2024/08/31/cf-words/1.webp\" class title=\"数据库\"></p>\n<p>展示:</p>\n<p><img loading=\"lazy\" data-src=\"/2024/08/31/cf-words/2.webp\" class title=\"网址页面\"></p>\n<h2 id=\"文件中转站\"><a class=\"anchor\" href=\"#文件中转站\">#</a> 文件中转站</h2>\n<h2 id=\"项目部署\"><a class=\"anchor\" href=\"#项目部署\">#</a> 项目部署</h2>\n<p>项目地址:</p>\n<p><a href=\"pastebin-ui,Github,https://github.com/rumian0/pastebin-ui\" title target></a></p>\n<p>其实部署起来非常简单，因为项目是分为前后端的，所以我们需要分别配置前后端：</p>\n<p>添加环境变量<strong> CF_API_TOKEN</strong></p>\n<p>修改<strong> wrangler.toml</strong> 文件中的内容，主要修改两个 KV 的 ID 和账户 ID，请提前在 cloudflare 中创建好对应 KV：</p>\n<pre><code class=\"language-TOML\">name= &quot;pastebin-worker&quot;\ncompatibility_date = &quot;2024-08-31&quot;\naccount_id= &quot;36d7b2c5fa77292ef996f68e964478bd&quot;\nmain = &quot;src/index.ts&quot;\nworkers_dev = false\n\nvars = &#123; ENVIRONMENT = &quot;production&quot; &#125;\nroute = &#123; pattern = &quot;paste.liyy.us.kg&quot;, custom_domain = true &#125;\n\nkv_namespaces = [\n  &#123; binding = &quot;PB&quot;, id = &quot;86bca3e920024adb9e70cd7c5da6ceed&quot; &#125;,\n  &#123; binding = &quot;PBIMGS&quot;, id =&quot;e3f5af1a0c584fcd841081d41a0c014d&quot; &#125;\n]\n\n[site]\nbucket = &quot;./static/dist&quot;\n</code></pre>\n<p>修改 **/static/.env** 文件，修改为你准备部署的地址，比如本站：</p>\n<pre><code class=\"language-YAML\">VITE_API_URL= https://paste.liyy.us.kg\n</code></pre>\n<p>点击<strong> github action</strong> 并进行部署，最终，项目即可成功部署。</p>\n<h3 id=\"报错\"><a class=\"anchor\" href=\"#报错\">#</a> 报错</h3>\n<p>目前部署失败，不知道哪一步出错，看下有没有大佬可以指点一下</p>\n<p><img loading=\"lazy\" data-src=\"/2024/08/31/cf-words/3.webp\" class title=\"英文\"></p>\n<p><img loading=\"lazy\" data-src=\"/2024/08/31/cf-words/4.webp\" class title=\"中文\"></p>\n",
            "tags": [
                "Cloudflare",
                "部署",
                "分享"
            ]
        }
    ]
}