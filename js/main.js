function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _createForOfIteratorHelper(e,t){var n,o,i,a,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return i=!(o=!0),{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,n=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw n}}};if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var sidebarFn=function(){function e(e){utils.sidebarPaddingR(),a.style.overflow=e?"hidden":"",utils[e?"fadeIn":"fadeOut"](i,.5),o.classList.toggle("open",e)}function t(){o.classList.contains("open")&&e(!1)}var n=document.getElementById("toggle-menu"),o=document.getElementById("sidebar-menus"),i=document.getElementById("menu-mask"),a=document.body;n.addEventListener("click",function(){return e(!0)}),i.addEventListener("click",t),window.addEventListener("resize",function(){utils.isHidden(n)&&o.classList.contains("open")&&t(),sco.refreshWaterFall()})},scrollFn=function(){var n=document.getElementById("rightside"),o=document.getElementById("page-header"),i=0,t=utils.throttle(function(){initThemeColor();var e,t=window.scrollY||document.documentElement.scrollTop;e=i<t,0<(i=t)?(o.classList.toggle("nav-visible",!e),o.classList.add("nav-fixed"),n&&(n.style.opacity="0.8",n.style.transform="translateX(-58px)")):(o.classList.remove("nav-fixed","nav-visible"),n&&(n.style.opacity="",n.style.transform=""))},200);window.addEventListener("scroll",function(e){t(e),0===window.scrollY&&(o.classList.remove("nav-fixed","nav-visible"),n)&&(n.style.cssText="opacity: ''; transform: ''")})},percent=function(){var e=document.documentElement,t=document.body,n=window.pageYOffset||e.scrollTop,o=Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,t.clientHeight,e.clientHeight)-e.clientHeight,t=Math.round(n/o*100),i=document.querySelector("#nav-totop"),a=document.querySelector(".rs_show .top i"),r=document.querySelector("#percent"),e=window.scrollY+e.clientHeight>=(document.getElementById("post-comment")||document.getElementById("footer")).offsetTop;null!=i&&i.classList.toggle("long",e||90<t),null!=a&&a.classList.toggle("show",e||90<t),r.textContent=e||90<t?i?GLOBAL_CONFIG.lang.backtop:"":t,document.querySelectorAll(".needEndHide").forEach(function(e){return e.classList.toggle("hide",o-n<100)})},showTodayCard=function(){var e=document.getElementById("todayCard"),t=document.querySelector(".topGroup");null!=t&&t.addEventListener("mouseleave",function(){return null==e?void 0:e.classList.remove("hide")})},initObserver=function(){var e=document.getElementById("post-comment"),t=document.getElementById("pagination"),n=document.querySelector(".comment-barrage");e&&t&&new IntersectionObserver(function(e){e.forEach(function(e){t.classList.toggle("show-window",e.isIntersecting),GLOBAL_CONFIG.comment.commentBarrage&&(n.style.bottom=e.isIntersecting?"-200px":"0px")})}).observe(e)},addCopyright=function(){var e,n,o,i,a,r;GLOBAL_CONFIG.copyright&&(n=(e=GLOBAL_CONFIG.copyright).limit,o=e.author,i=e.link,a=e.source,r=e.info,document.body.addEventListener("copy",function(e){e.preventDefault();var t=window.getSelection().toString(),t=t.length>n?"".concat(t,"\n\n").concat(o,"\n").concat(i).concat(window.location.href,"\n").concat(a,"\n").concat(r):t;e.clipboardData.setData("text",t)}))},asideStatus=function(){var e=utils.saveToLocal.get("aside-status");document.documentElement.classList.toggle("hide-aside","hide"===e)};function initThemeColor(){var e=0<(window.scrollY||document.documentElement.scrollTop)?"--efu-card-bg":PAGE_CONFIG.is_post?"--efu-main":"--efu-background";applyThemeColor(getComputedStyle(document.documentElement).getPropertyValue(e))}function applyThemeColor(e){var t=document.querySelector('meta[name="theme-color"]'),n=document.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]');null!=t&&t.setAttribute("content",e),null!=n&&n.setAttribute("content",e),window.matchMedia("(display-mode: standalone)").matches&&(document.body.style.backgroundColor=e)}var handleThemeChange=function(t){var e=(null==(e=window.globalFn)?void 0:e.themeChange)||{};Object.values(e).forEach(function(e){return e(t)})},sco={lastSayHello:"",wasPageHidden:!1,musicPlaying:!1,scrollTo:function(e){var e=document.getElementById(e);e&&(e=e.getBoundingClientRect().top+window.pageYOffset-80,window.scroll({top:e,behavior:"smooth"}))},musicToggle:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=(this.isMusicBind||this.musicBind(),document.querySelector("#nav-music")),n=document.querySelector("meting-js"),o=document.getElementById("consoleMusic"),i=document.querySelector("#menu-music-toggle span"),a=document.querySelector("#menu-music-toggle i");this.musicPlaying=!this.musicPlaying,t.classList.toggle("playing",this.musicPlaying),t.classList.toggle("stretch",this.musicPlaying),null!=o&&o.classList.toggle("on",this.musicPlaying),"undefined"!=typeof rm&&null!=(t=rm)&&t.menuItems.music[0]&&(i.textContent=this.musicPlaying?GLOBAL_CONFIG.right_menu.music.stop:GLOBAL_CONFIG.right_menu.music.start,a.className=this.musicPlaying?"solitude fas fa-pause":"solitude fas fa-play"),e&&(this.musicPlaying?n.aplayer.play():n.aplayer.pause())},musicBind:function(){var e=this,t=document.querySelector("#nav-music"),n=document.querySelector("#nav-music .aplayer-music"),o=document.querySelector("#nav-music .aplayer-button");null!=n&&n.addEventListener("click",function(){t.classList.toggle("stretch")}),null!=o&&o.addEventListener("click",function(){e.musicToggle(!1)}),this.isMusicBind=!0},switchCommentBarrage:function(){var e,t=document.querySelector(".comment-barrage"),n=document.querySelector("#consoleCommentBarrage");t&&(e="flex"===window.getComputedStyle(t).display,t.style.display=e?"none":"flex",null!=n&&n.classList.toggle("on",!e),utils.saveToLocal.set("commentBarrageSwitch",!e,.2),null!=(t=rm))&&t.menuItems.barrage&&rm.barrage(e)},switchHideAside:function(){var e=document.documentElement.classList,t=document.querySelector("#consoleHideAside"),n=e.contains("hide-aside");utils.saveToLocal.set("aside-status",n?"show":"hide",1),e.toggle("hide-aside"),t.classList.toggle("on",!n)},switchKeyboard:function(){this.sco_keyboards=!this.sco_keyboards;var e=document.querySelector("#consoleKeyboard"),t=this.sco_keyboards?openKeyboard:closeKeyboard;null!=e&&e.classList.toggle("on",this.sco_keyboards),t(),localStorage.setItem("keyboard",this.sco_keyboards),null!=(e=document.getElementById("keyboard-tips"))&&e.classList.remove("show")},initConsoleState:function(){var e=document.querySelector("#consoleHideAside");e&&e.classList.toggle("on",document.documentElement.classList.contains("hide-aside"))},changeSayHelloText:function(){for(var e,t=GLOBAL_CONFIG.aside.sayhello2,n=document.getElementById("author-info__sayhi");(e=t[Math.floor(Math.random()*t.length)])===this.lastSayHello;);n.textContent=e,this.lastSayHello=e},switchDarkMode:function(){var e="dark"===document.documentElement.getAttribute("data-theme"),t=e?"light":"dark";document.documentElement.setAttribute("data-theme",t),utils.saveToLocal.set("theme",t,.02),utils.snackbarShow(GLOBAL_CONFIG.lang.theme[t],!1,2e3),"object"===("undefined"==typeof rm?"undefined":_typeof(rm))&&rm.mode(!e)&&rm.hideRightMenu(),handleThemeChange(t)},hideTodayCard:function(){return document.getElementById("todayCard").classList.add("hide")},toTop:function(){return utils.scrollToDest(0)},showConsole:function(){var e;return null==(e=document.getElementById("console"))?void 0:e.classList.toggle("show",!0)},hideConsole:function(){var e;return null==(e=document.getElementById("console"))?void 0:e.classList.remove("show")},refreshWaterFall:function(){var t=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&setTimeout(function(){waterfall(e.target).then(function(){e.target.classList.add("show")})},300)})});document.querySelectorAll(".waterfall").forEach(function(e){return t.observe(e)})},addRuntime:function(){var e=document.getElementById("runtimeshow");e&&GLOBAL_CONFIG.runtime&&(e.innerText=utils.timeDiff(new Date(GLOBAL_CONFIG.runtime),new Date)+GLOBAL_CONFIG.lang.day)},toTalk:function(t){["#wl-edit",".el-textarea__inner","#veditor",".atk-textarea"].forEach(function(e){e=document.querySelector(e);e&&(e.dispatchEvent(new Event("input",{bubble:!0,cancelable:!0})),e.value="> "+t.replace(/\n/g,"\n> ")+"\n\n",utils.scrollToDest(utils.getEleTop(document.getElementById("post-comment")),300),e.focus(),e.setSelectionRange(-1,-1))}),utils.snackbarShow(GLOBAL_CONFIG.lang.totalk,!1,2e3)},initbbtalk:function(){document.querySelector("#bber-talk")&&new Swiper(".swiper-container",{direction:"vertical",loop:!0,autoplay:{delay:3e3,pauseOnMouseEnter:!0}})},addPhotoFigcaption:function(){document.querySelectorAll(".article-container img:not(.gallery-item img)").forEach(function(e){var t=e.getAttribute("alt");t&&e.insertAdjacentHTML("afterend",'<div class="img-alt is-center">'.concat(utils.escapeHtml(t),"</div>"))})},scrollToComment:function(){return utils.scrollToDest(utils.getEleTop(document.getElementById("post-comment")),300)},setTimeState:function(){var t,e,n,o,i=document.getElementById("author-info__sayhi");i&&(t=(new Date).getHours(),e=GLOBAL_CONFIG.aside.sayhello,o=(o=(e=>{var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var o=t.value,i=localStorage.getItem(o);if(i)return JSON.parse(i)}}catch(e){n.e(e)}finally{n.f()}return null})(["twikoo","WALINE_USER_META","WALINE_USER","_v_Cache_Meta","ArtalkUser"]))?o.nick||o.display_name:null,n=this.wasPageHidden?GLOBAL_CONFIG.aside.sayhello3.back+o:GLOBAL_CONFIG.aside.sayhello3.prefix+o,o=[{start:0,end:5,text:o?n:e.goodnight},{start:6,end:10,text:o?n:e.morning},{start:11,end:14,text:o?n:e.noon},{start:15,end:18,text:o?n:e.afternoon},{start:19,end:24,text:o?n:e.night}].find(function(e){return t>=e.start&&t<=e.end}),i.innerText=o.text)},tagPageActive:function(){var e=decodeURIComponent(window.location.pathname);/\/tags\/.*?\//.test(e)&&(e=e.split("/").slice(-2,-1)[0],e=document.getElementById(e))&&(document.querySelectorAll("a.select").forEach(function(e){e.classList.remove("select")}),e.classList.add("select"))},categoriesBarActive:function(){var e=document.querySelector("#category-bar"),t=decodeURIComponent(window.location.pathname),n=t===GLOBAL_CONFIG.root;e&&(e.querySelectorAll(".category-bar-item").forEach(function(e){return e.classList.remove("select")}),e=n?"category-bar-home":t.split("/").slice(-2,-1)[0],n=document.getElementById(e))&&n.classList.add("select")},scrollCategoryBarToRight:function(){var e,t=this,n=document.getElementById("category-bar-items"),o=document.getElementById("category-bar-next");n&&(e=function(){return n.scrollLeft+n.clientWidth>=n.scrollWidth-8},n.addEventListener("scroll",function(){clearTimeout(t.timeoutId),t.timeoutId=setTimeout(function(){o.style.transform=e()?"rotate(180deg)":""},150)}),n.scroll({left:e()?0:n.clientWidth,behavior:"smooth"}))},openAllTags:function(){var e;document.querySelectorAll(".card-allinfo .card-tag-cloud").forEach(function(e){return e.classList.add("all-tags")}),null!=(e=document.getElementById("more-tags-btn"))&&e.remove()},listenToPageInputPress:function(){var t,e,n,o=document.querySelector(".toPageGroup"),i=document.getElementById("toPageText");i&&(t=document.getElementById("toPageButton"),e=document.querySelectorAll(".page-number"),n=+e[e.length-1].textContent,i&&1!=n?(i.addEventListener("keydown",function(e){13===e.keyCode&&(sco.toPage(),pjax.loadUrl(t.href))}),i.addEventListener("input",function(){t.classList.toggle("haveValue",""!==i.value&&"0"!==i.value),+i.value>n&&(i.value=n)})):o.style.display="none")},addNavBackgroundInit:function(){0!==document.documentElement.scrollTop&&document.getElementById("page-header").classList.add("nav-fixed","nav-visible")},toPage:function(){var e=document.querySelectorAll(".page-number"),e=parseInt(e[e.length-1].innerHTML),t=document.getElementById("toPageText"),t=parseInt(t.value);document.getElementById("toPageButton").href=!isNaN(t)&&t<=e&&1<t?window.location.href.replace(/\/page\/\d+\/$/,"/")+"page/"+t+"/":"/"},owoBig:function(n){function o(e){e=e.getBoundingClientRect(),i.style.left="".concat(e.left-i.offsetWidth/4,"px"),i.style.top="".concat(e.top,"px")}var i;(i=document.getElementById("owo-big"))||((i=document.createElement("div")).id="owo-big",document.body.appendChild(i));document.addEventListener("mouseover",function(e){var e=e.target,t=e.closest(n.item);t&&e.closest(n.body)&&(e=null==(e=t.querySelector("img"))?void 0:e.src)&&(i.innerHTML='<img src="'.concat(e,'" style="max-width: 100%; height: auto;">'),i.style.display="block",o(t))}),document.addEventListener("mouseout",function(e){e.target.closest(n.item)&&e.target.closest(n.body)&&(i.style.display="none")})},changeTimeFormat:function(e){e.forEach(function(e){var t=e.getAttribute("datetime");e.textContent=utils.diffDate(t,!0),e.style.display="inline"})},switchComments:function(){var e,t,n=document.getElementById("switch-btn");n&&(e=!1,t=document.getElementById("post-comment"),utils.addEventListenerPjax(n,"click",function(){t.classList.toggle("move"),e||"function"!=typeof loadTwoComment||(e=!0,loadTwoComment())}))}},addHighlight=function(){var e,t,r,n,i,c,l,s,u,a,o,d,m,g,f,y=GLOBAL_CONFIG.highlight;y&&(e=y.copy,t=y.expand,r=y.limit,i="prismjs"===(n=y.syntax),c=y.enable||e||t||r,l=t?"":"closed",y="highlight.js"===n?document.querySelectorAll("figure.highlight"):document.querySelectorAll('pre[class*="language-"]'),c||r)&&y.length&&(s=e?'<i class="solitude fas fa-copy copy-button"></i>':"<i></i>",u=r?'<i class="solitude fas fa-angles-down"></i>':"<i></i>",a=function(e,t){return utils.snackbarShow(t,!1,2e3)},o=function(e){var t=e.parentNode,n=(t.classList.add("copy-true"),window.getSelection()),o=document.createRange();o.selectNodeContents(t.querySelectorAll("".concat(i?"pre code":"table .code pre"))[0]),n.removeAllRanges(),n.addRange(o),document.execCommand("copy"),a(e.lastChild,GLOBAL_CONFIG.lang.copy.success),n.removeAllRanges(),t.classList.remove("copy-true")},d=function(e){return e.classList.toggle("closed")},m=function(){this.classList.toggle("expand-done")},g=function(e){e=e.target.classList;e.contains("expand")?d(this):e.contains("copy-button")&&o(this)},f=function(e,t,n){var o,i,a=document.createDocumentFragment();c&&(o="",(i=t.querySelector("figcaption"))&&(o='<div class="caption">'.concat(i.innerHTML,"</div>"),t.removeChild(i)),(i=document.createElement("div")).className="highlight-tools ".concat(l),i.innerHTML='<i class="solitude fas fa-angle-down expand"></i>'+e+o+s,utils.addEventListenerPjax(i,"click",g),a.appendChild(i)),r&&t.offsetHeight>r+30&&((e=document.createElement("div")).className="code-expand-btn",e.innerHTML=u,utils.addEventListenerPjax(e,"click",m),a.appendChild(e)),"hl"===n?t.insertBefore(a,t.firstChild):t.parentNode.insertBefore(a,t)},i?y.forEach(function(e){var t=e.getAttribute("data-language")||"Code",t='<div class="code-lang">'.concat(utils.escapeHtml(t),"</div>");utils.wrap(e,"figure",{class:"highlight"}),f(t,e)}):y.forEach(function(e){var t=e.getAttribute("class").split(" ")[1],t=("plain"!==t&&void 0!==t||(t="Code"),'<div class="code-lang">'.concat(utils.escapeHtml(t),"</div>"));f(t,e,"hl")}))},toc=(()=>_createClass(function e(){_classCallCheck(this,e)},null,[{key:"init",value:function(){var e,t=document.getElementById("card-toc");t&&t.querySelector(".toc a")?((e=document.querySelectorAll(".toc a")).forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),utils.scrollToDest(utils.getEleTop(document.getElementById(decodeURI(("toc-text"===e.target.className?e.target.parentNode:e.target).hash.replace("#","")))),300)})}),this.active(e)):t.style.display="none"}},{key:"active",value:function(a){function t(n){if(0!==n){var o="";if(c.forEach(function(e,t){n>utils.getEleTop(e)-80&&(o=t)}),l!==o){l=o,document.querySelectorAll(".toc .active").forEach(function(e){e.classList.remove("active")});var e,t=a[l];if(t){var i=a[l].parentNode;for(t.classList.add("active"),t=(t=t).getBoundingClientRect().top,e=r.scrollTop,t>document.documentElement.clientHeight-100&&(r.scrollTop=e+150),t<100&&(r.scrollTop=e-150);!i.matches(".toc");i=i.parentNode)i.matches("li")&&i.classList.add("active")}}}}var e=document.querySelector(".article-container"),r=document.getElementById("toc-content"),c=e.querySelectorAll("h1,h2,h3,h4,h5,h6"),l="";window.tocScrollFn=utils.throttle(function(){var e=window.scrollY||document.documentElement.scrollTop;t(e)},100),window.addEventListener("scroll",tocScrollFn)}}]))(),tabs=(()=>_createClass(function e(){_classCallCheck(this,e)},null,[{key:"init",value:function(){this.clickFnOfTabs(),this.backToTop()}},{key:"clickFnOfTabs",value:function(){document.querySelectorAll(".article-container .tab > button").forEach(function(e){e.addEventListener("click",function(){var e,t,n,o=this.parentNode;o.classList.contains("active")||(e=o.parentNode.nextElementSibling,(t=utils.siblings(o,".active")[0])&&t.classList.remove("active"),o.classList.add("active"),n=this.getAttribute("data-href").replace("#",""),_toConsumableArray(e.children).forEach(function(e){e.classList.toggle("active",e.id===n)}))})})}},{key:"backToTop",value:function(){document.querySelectorAll(".article-container .tabs .tab-to-top").forEach(function(e){e.addEventListener("click",function(){utils.scrollToDest(utils.getEleTop(this.parentElement.parentElement.parentNode),300)})})}},{key:"lureAddListener",value:function(){var t;GLOBAL_CONFIG.lure&&(t=document.title,document.addEventListener("visibilitychange",function(){var e=GLOBAL_CONFIG.lure;document.title="hidden"===document.visibilityState?e.jump:e.back,"visible"===document.visibilityState&&setTimeout(function(){document.title=t},2e3)}))}},{key:"expireAddListener",value:function(){var e,t,n=GLOBAL_CONFIG.expire;n&&(e=(e=document.querySelectorAll(".post-meta-date time")).length?e[e.length-1]:document.querySelector(".datatime"))&&(e=Math.ceil(((new Date).getTime()-new Date(e.getAttribute("datetime")).getTime())/1e3/60/60/24),n.time>e||((t=document.createElement("div")).className="expire",t.innerHTML='<i class="solitude fas fa-circle-exclamation"></i>'.concat(n.text_prev).concat(-(n.time-e)).concat(n.text_next),document.getElementById("article-container").insertAdjacentElement("top"===n.position?"afterbegin":"beforeend",t)))}}]))(),scrollFnToDo=function(){var n,e;PAGE_CONFIG.toc&&((e=(n=document.getElementById("card-toc")).querySelector(".toc-content")).querySelectorAll(".toc-link"),n.querySelector(".toc-percentage"),e.classList.contains("is-expand"),utils.addEventListenerPjax(e,"click",function(e){var t=e.target.closest(".toc-link");t&&(e.preventDefault(),utils.scrollToDest(utils.getEleTop(document.getElementById(decodeURI(t.getAttribute("href")).replace("#",""))),300),window.innerWidth<900)&&n.classList.remove("open")}))},forPostFn=function(){scrollFnToDo()};window.refreshFn=function(){var e=PAGE_CONFIG,t=e.is_home,n=e.is_page,o=e.page,e=e.is_post,i=GLOBAL_CONFIG,a=i.runtime,r=i.lazyload,c=i.lightbox,l=i.randomlink,s=i.covercolor,u=i.post_ai,d=i.lure,i=i.expire,m=(t||e?".post-meta-date time":".datatime")+", .webinfo-item time";document.body.setAttribute("data-type",o),sco.changeTimeFormat(document.querySelectorAll(m)),a&&sco.addRuntime(),[scrollFn,sidebarFn,sco.addPhotoFigcaption,sco.setTimeState,sco.tagPageActive,sco.categoriesBarActive,sco.listenToPageInputPress,sco.addNavBackgroundInit,sco.refreshWaterFall].forEach(function(e){return e()}),r.enable&&utils.lazyloadImg(),c&&utils.lightbox(document.querySelectorAll(".article-container img:not(.flink-avatar,.gallery-group img, .no-lightbox)")),l&&randomLinksList(),u&&e&&ai.init(),sco.switchComments(),initObserver(),t&&showTodayCard(),"function"==typeof updatePostsBasedOnComments&&updatePostsBasedOnComments(),(e||n)&&(addHighlight(),tabs.init()),e&&i&&tabs.expireAddListener(),s.enable&&coverColor(),PAGE_CONFIG.toc&&toc.init(),d&&tabs.lureAddListener(),"music"===o&&initializeMusicPlayer(),forPostFn()},document.addEventListener("DOMContentLoaded",function(){[addCopyright,window.refreshFn,asideStatus,function(){return window.onscroll=percent},sco.initConsoleState].forEach(function(e){return e()})}),document.addEventListener("visibilitychange",function(){document.hidden&&(sco.wasPageHidden=!0)}),window.onkeydown=function(e){var t=e.keyCode;(123===t||e.ctrlKey&&e.shiftKey&&67===t)&&utils.snackbarShow(GLOBAL_CONFIG.lang.f12,!1,3e3),27===t&&sco.hideConsole()},document.addEventListener("copy",function(){utils.snackbarShow(GLOBAL_CONFIG.lang.copy.success,!1,3e3)});